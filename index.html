<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leviathan Protocol - Interfaz Anónima</title>
    <!-- Carga de Tailwind CSS para utilidades rápidas de diseño (aunque style.css lo domina) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <!-- Carga de Google Fonts (Monospace para un toque de terminal) -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="antialiased">

    <!-- Glitch Background Overlay (simula estática de una terminal) -->
    <div id="glitch-overlay"></div>

    <div class="terminal-container">
        
        <!-- HEADER / LOGO - Glitch Effect -->
        <header class="text-center mb-10">
            <h1 id="terminal-title" class="title glitch" data-text="LEVIATHAN // PROTOCOL">
                LEVIATHAN // PROTOCOL
            </h1>
            <p class="subtitle mt-2">Acceso a la red oscura | Canales 9-12 | Cifrado Activo</p>
        </header>

        <!-- MAIN CONSOLE LAYOUT -->
        <main class="grid md:grid-cols-3 gap-8">
            
            <!-- LEFT PANEL: POST INPUT (NEW MESSAGE) -->
            <section class="md:col-span-1 console-panel input-panel">
                <h2 class="panel-header">>>> INPUT_THREAD // INYECTAR MENSAJE</h2>
                <form id="postForm" class="flex flex-col space-y-4">
                    
                    <div class="input-group">
                        <label for="username" class="input-label">Identidad (Opcional, 12 car. máx)</label>
                        <input type="text" id="username" maxlength="12" placeholder="> AGENTE_01" class="console-input" autocomplete="off">
                    </div>

                    <div class="input-group">
                        <label for="postContent" class="input-label">Contenido del Thread (Máx 280 car.)</label>
                        <textarea id="postContent" maxlength="280" placeholder="> Iniciando secuencia de conexión cifrada..." class="console-textarea"></textarea>
                    </div>

                    <button type="submit" class="console-button">
                        [ENVIAR SEGURO]
                    </button>
                    
                    <div id="status-message" class="status-box hidden"></div>
                </form>
            </section>

            <!-- RIGHT PANEL: POSTS DISPLAY (FORUM FEED) -->
            <section class="md:col-span-2 console-panel output-panel">
                <h2 class="panel-header">>>> OUTPUT_LOG // CANAL PRINCIPAL [LIVE FEED]</h2>
                
                <!-- The message about the user ID is crucial for collaborative environments -->
                <div class="user-id-display">
                    <span class="text-yellow-400">STATUS:</span> <span class="text-white">Conectado como ID_LOCAL: </span> <span id="local-user-id" class="text-green-500 font-bold"></span>
                    <span class="scan-line-effect block mt-1"></span>
                </div>

                <div id="postsContainer" class="posts-container">
                    <!-- Posts will be injected here by JavaScript -->
                    <p class="text-center text-gray-500 mt-8">Cargando datos cifrados... (Si no aparecen mensajes, la conexión a Firestore es correcta.)</p>
                </div>
            </section>
        </main>
        
        <!-- FOOTER / SCANLINE -->
        <footer class="mt-10 text-center">
            <p class="text-xs text-gray-600">-- [ EOL: End of Line ] --</p>
        </footer>
    </div>

    <!-- Firebase Scripts (v9 compatibility wrappers for simplicity) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <!-- Project Logic -->
    <script src="app.js"></script>

</body>
</html>
